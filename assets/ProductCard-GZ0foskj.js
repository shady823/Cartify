import{o as p,c as n,z as l,t as x,w as v,j as r,m as g,L as b,s as f,p as m,q as y,B as w}from"./index-BwQBjtFe.js";function N({product:e,isInWishlist:a=!1,imageLoading:u="lazy"}){const o=e.id??e._id??"",c=p(),s=n({mutationFn:()=>x.add(o,1),onSuccess:()=>{c.invalidateQueries({queryKey:["cart"]}),l.success("Added to cart")},onError:()=>l.error("Failed to add to cart")}),d=n({mutationFn:()=>a?v.remove(o):v.add(o),onSuccess:()=>{c.invalidateQueries({queryKey:["wishlist"]}),l.success(a?"Removed from wishlist":"Added to wishlist")},onError:()=>l.error("Something went wrong")}),i=e.priceAfterDiscount!=null&&e.priceAfterDiscount>0&&e.priceAfterDiscount<e.price,h=i?e.priceAfterDiscount:e.price;return r.jsxs(g.article,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-4},transition:{duration:.2},className:"group relative rounded-3xl border border-[var(--color-border)] bg-[var(--color-card)] dark:bg-[var(--color-card)]/80 overflow-hidden shadow-lg hover:shadow-hover transition-shadow duration-300",children:[r.jsxs(b,{to:`/products/${o}`,className:"block",children:[r.jsxs("div",{className:"relative aspect-square overflow-hidden bg-[var(--color-card-hover)] dark:bg-[var(--color-card-hover)]/50",children:[r.jsx("img",{src:e.imageCover,alt:e.title,loading:u,decoding:"async",className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"}),i&&r.jsx("span",{className:"absolute left-3 top-3 rounded-xl bg-[var(--color-destructive)] px-2.5 py-1 text-xs font-semibold text-white",children:"Sale"})]}),r.jsxs("div",{className:"p-5",children:[r.jsx("h3",{className:"font-semibold text-[var(--color-foreground)] dark:text-[var(--color-foreground)] line-clamp-2 group-hover:text-[var(--color-primary)] dark:group-hover:text-[var(--color-primary-hover)] transition-colors",children:e.title}),r.jsx("p",{className:"mt-1 text-sm text-[var(--color-muted)] dark:text-[var(--color-muted-foreground)] line-clamp-1",children:e.category?.name}),r.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[r.jsxs("span",{className:"text-lg font-bold text-[var(--color-primary)] dark:text-[var(--color-primary-hover)]",children:["EGP ",h]}),i&&r.jsxs("span",{className:"text-sm text-[var(--color-muted-foreground)] line-through",children:["EGP ",e.price]})]})]})]}),r.jsxs("div",{className:"absolute right-3 top-3 flex flex-col gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx("button",{type:"button",onClick:t=>{t.preventDefault(),d.mutate()},disabled:d.isPending||!o,className:m("p-2.5 rounded-xl bg-[var(--color-card)]/90 dark:bg-[var(--color-card)]/80 shadow-lg border border-[var(--color-border)] transition-colors",a?"text-[var(--color-destructive)] hover:bg-[var(--color-destructive)]/20 dark:hover:bg-[var(--color-destructive)]/30":"hover:bg-[var(--color-card-hover)] dark:hover:bg-[var(--color-card-hover)]/50"),"aria-label":a?"Remove from wishlist":"Add to wishlist",children:r.jsx(f,{className:m("h-5 w-5",a&&"fill-current")})}),r.jsx("button",{type:"button",onClick:t=>{t.preventDefault(),s.mutate()},disabled:s.isPending||!o,className:"p-2.5 rounded-xl bg-[var(--color-card)]/90 dark:bg-[var(--color-card)]/80 shadow-lg border border-[var(--color-border)] hover:bg-[var(--color-primary)]/20 dark:hover:bg-[var(--color-primary)]/30 text-[var(--color-primary)] dark:text-[var(--color-primary-hover)] transition-colors","aria-label":"Add to cart",children:r.jsx(y,{className:"h-5 w-5"})})]}),r.jsx("div",{className:"px-5 pb-5",children:r.jsx(w,{variant:"primary",size:"sm",className:"w-full",loading:s.isPending,disabled:!o,onClick:t=>{t.preventDefault(),s.mutate()},children:"Add to cart"})})]})}export{N as P};
